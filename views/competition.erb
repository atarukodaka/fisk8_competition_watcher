<h1><%= competition[:name] %></h1>

<table class="table">
  <tr>
    <th>Location<td><%= competition[:city] %>, <%= competition[:country] %>
  </tr>
  <tr>
    <th>Date</th>
    <td><%= competition[:starting_date].strftime("%Y/%m/%d") %> -
      <%= competition[:ending_date].strftime("%Y/%m/%d") %>
    </td>
  </tr>
  <tr>
    <th>
      Official Site
    <td>
      <a href="<%= competition[:site_url] %>" target="_blank">Result</a>
  </tr>
</table>

<h2> Skating Order / Result</h2>

<table class="table table-striped table-hover">
<thead>
<tr>
  <th>Category<th>Segment<th>Entry<th>Result<th>Segments
</thead>
<% competition.categories.each {|category| %>
<tr>
  <td><%= category.name %>
  <td>entry
   <% segment = category.segments %>
  <td><%= segment.first.try(:name) %> (judge score)
  <td><%= segment.second.try(:name) %> (judge score)
  <td>result
<% } %>
</table>

<h2>Time Schedule</h2>

<%
 ar = competition.categories.map {|category| 

  category.segments.map {|segment|
    {category: category.name, segment: segment.name, starting_time: segment.starting_time || Time.at(0)}
  }
 }.flatten

%>

<table class="table table-striped table-hover">
  <tr>
    <th>Starting Time <th>Content
  </tr>
  <% ar.sort_by {|item| item[:starting_time]}.each {|hash| %>
  <tr>
    <td><%= (hash[:starting_time].nil?) ? "" : hash[:starting_time].strftime("%Y/%m/%d %H:%M") %>
    <td><%= hash[:category] %>-<%= hash[:segment] %>

  <% } %>
      
      
</table>
